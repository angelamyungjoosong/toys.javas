
CREATE TABLE POLLS_CHOICE
(
  POLLS_CHOICE VARCHAR(50) NOT NULL COMMENT '설문 답항',
  QUESTIONS_ID VARCHAR(50) NOT NULL COMMENT '설문 문항 코드',
  POLLS_CHOICE VARCHAR(50) NOT NULL COMMENT '설문 답항 코드',
  PRIMARY KEY (POLLS_CHOICE)
) COMMENT '설문 답항 ';

CREATE TABLE POLLS_QUESTIONS
(
  QUESTIONS    VARCHAR(50) NOT NULL COMMENT '설문 문항',
  QUESTIONS_ID VARCHAR(50) NOT NULL COMMENT '설문 문항 코드',
  PRIMARY KEY (QUESTIONS_ID)
) COMMENT '설문 문항';

CREATE TABLE POLLS_RESPONDENTS
(
  RESPONDENTS    VARCHAR(50) NOT NULL COMMENT '설문자',
  RESPONDENTS_ID VARCHAR(50) NOT NULL COMMENT '설문자 코드',
  PRIMARY KEY (RESPONDENTS_ID)
) COMMENT '설문자';

CREATE TABLE POLLS_STATISTICS
(
  RESPONDENTS_ID      VARCHAR(50) NOT NULL COMMENT '설문자 코드',
  QUESTIONS_ID        VARCHAR(50) NOT NULL COMMENT '설문 문항 코드',
  POLLS_STATISTICS_ID VARCHAR(50) NOT NULL COMMENT '설문 통계 코드',
  POLLS_CHOICE        VARCHAR(50) NOT NULL COMMENT '설문 답항 코드',
  PRIMARY KEY (POLLS_STATISTICS_ID)
) COMMENT '설문 통계';

ALTER TABLE POLLS_STATISTICS
  ADD CONSTRAINT FK_POLLS_RESPONDENTS_TO_POLLS_STATISTICS
    FOREIGN KEY (RESPONDENTS_ID)
    REFERENCES POLLS_RESPONDENTS (RESPONDENTS_ID);

ALTER TABLE POLLS_STATISTICS
  ADD CONSTRAINT FK_POLLS_QUESTIONS_TO_POLLS_STATISTICS
    FOREIGN KEY (QUESTIONS_ID)
    REFERENCES POLLS_QUESTIONS (QUESTIONS_ID);

ALTER TABLE POLLS_CHOICE
  ADD CONSTRAINT FK_POLLS_QUESTIONS_TO_POLLS_CHOICE
    FOREIGN KEY (QUESTIONS_ID)
    REFERENCES POLLS_QUESTIONS (QUESTIONS_ID);

ALTER TABLE POLLS_STATISTICS
  ADD CONSTRAINT FK_POLLS_CHOICE_TO_POLLS_STATISTICS
    FOREIGN KEY (POLLS_CHOICE)
    REFERENCES POLLS_CHOICE (POLLS_CHOICE);
